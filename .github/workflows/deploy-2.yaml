name: Deploy to server

on: push

jobs:
  first_job:  # Esto actúa como id
    name: Hola mundo desde Código Facilito  # Esto es el nombre que muestra en la columna de la izquiera cuando se está ejecutando
    runs-on: ubuntu-latest
    env:
      NAME: Código Facilito
    steps:
      - name: Hola Mundo
        run: echo "Hola Mundo desde $NAME"

  second_job:
    name: Hola mundo desde rama main
    # if: false  # no se ejecutaría porque la directiva if es false aunque el first_job finalice con éxito
    if: ${{ github.ref_name }} == "main"  # En la clase pone la comparación dentro del contexto, pero a mí solo me funciona fuera.
    needs: first_job  # se puede especificar en formato de lista para especificar todos los jobs previos que necesita.
    # Si falla first_job, second_job no se ejecutará
    runs-on: ubuntu-latest
    steps:
      - name: Hola Mundo
        run: echo "Segundo Hola Mundo desde ${{ github.ref_name }}"
  
  third_job:
    name: Uso de actions
    runs-on: ubuntu-latest
    steps:
      - name: Working directory
        run: ls -al
      - name: Checkout
        uses: actions/checkout@v4
      - name: Working directory
        run: ls -al

  fourth_job:
    name: Uso de output
    runs-on: ubuntu-latest
    steps:
      - name: Guardar en output
        id: step_1
        run: echo "mi_variable=string a guardar" >> $GITHUB_OUTPUT
      - name: Leer de output
        id: step_2
        run: echo ${{ steps.step_1.outputs.mi_variable }}